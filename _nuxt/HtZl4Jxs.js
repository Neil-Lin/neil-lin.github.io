import{_ as Y}from"./CkdoMXL6.js";import{q as Z,G as x,R as ee,H as te,O as oe,r as w,c as _,w as R,L as se,I as le,J as ae,x as a,A as t,B as U,N as u,S as V,j as n,K as ne,F as h,y as r,P as I,T as N,U as D,z as $,V as j,C as z,W as re,X as ie,E as F,D as s,n as ue,_ as de}from"./DSOq2CeF.js";import{_ as ce}from"./BFKQDAnt.js";import{_ as pe}from"./S390aRff.js";import{p as Q}from"./B2KhpFqi.js";const me={class:"page page--grid"},fe={class:"page-container"},ve={class:"filters"},_e={for:"sortorder"},ge={value:"desc"},ye={value:"asc"},he={for:"roleFilter"},ke={value:""},we=["value"],$e={for:"platformFilter"},be={value:""},Re={class:"group-year-present"},Pe={class:"portfolio-list"},Ce={class:"portfolio-title"},Se={class:"portfolio-content"},qe=["src","alt"],Be={key:1,class:"portfolio-intro"},Me={class:"portfolio-footer"},Te={class:"tag"},Ue={key:0,class:"visually-hidden"},Ve={key:1,class:"tag"},Ie={key:2,class:"tag"},Ne={key:3,class:"visually-hidden"},De={key:1,class:"portfolio-link portfolio-link--disabled"},Fe={class:"portfolio-title"},Ae={class:"portfolio-content"},Ee=["src"],We={key:0,class:"portfolio-intro"},He={class:"portfolio-footer"},Le={class:"tag"},Oe={key:0,class:"visually-hidden"},je={key:1,class:"tag"},ze={key:2,class:"tag"},Qe={key:3,class:"visually-hidden"},Ge=Z({__name:"products",setup(Je){const{t:m,locale:P}=x(),C=ee(),i=te(),A=oe(),k=w(null),E=w(Q),S=ae(),b=_(()=>m("words.products")),q=_(()=>m("words.careerWorks")),p=w(i.query.sortorder?String(i.query.sortorder):"desc"),f=w(i.query.role?String(i.query.role):""),v=w(i.query.platform?String(i.query.platform):""),g=_(()=>i.query.dialog==="true"&&i.params.name),G=_(()=>{const e=new Set;return E.value.forEach(o=>{o.roles[P.value].forEach(d=>e.add(d))}),Array.from(e)});R([f,v,p],()=>{C.replace({path:i.path,query:{role:f.value||void 0,platform:v.value||void 0,sortorder:p.value||void 0}})}),R(()=>i.query,e=>{f.value=e.role?String(e.role):"",v.value=e.platform?String(e.platform):"",p.value=e.sortorder?String(e.sortorder):"desc"});const J=_(()=>E.value.filter(e=>{const o=f.value===""||e.roles[P.value].includes(f.value),d=v.value===""||e.platform.includes(v.value);return o&&d}).sort((e,o)=>p.value==="asc"?e.yearRange.start-o.yearRange.start:o.yearRange.start-e.yearRange.start)),W=_(()=>{const e=[];return J.value.forEach(o=>{const d=o.yearRange.start;let y=e.find(B=>B.year===d);y||(y={year:d,products:[]},e.push(y)),y.products.push(o)}),e.sort((o,d)=>p.value==="asc"?o.year-d.year:d.year-o.year),e}),H=e=>e.end===null?`${e.start} - `+m("words.present"):`${e.start} - ${e.end}`,L=async()=>{k.value?.close(),await C.replace({path:A("/products"),query:{role:f.value||void 0,platform:v.value||void 0,sortorder:p.value||void 0}})};R(()=>i.fullPath,()=>{g.value||k.value?.close()}),R(g,async e=>{e&&(await ue(),k.value?.showModal())}),se(()=>{g.value&&k.value?.showModal(),Object.keys(i.query).length>0&&C.replace(i.path)}),le({title:b,meta:[{hid:"description",name:"description",content:q.value},{hid:"og:url",property:"og:url",content:S.public.baseUrl+i.path},{hid:"og:title",property:"og:title",content:b.value+" - "+m("website.name")},{hid:"og:description",property:"og:description",content:q.value},{hid:"twitter:url",name:"twitter:url",content:S.public.baseUrl+i.path},{hid:"twitter:title",name:"twitter:title",content:b.value+" - "+m("website.name")},{hid:"twitter:description",name:"twitter:description",content:q.value}]});const K=_(()=>{const e=i.params.name,o=Q.find(d=>d.slug===e);return e&&o?[{link:"/",title:m("action.goToHomePage")},{link:"/products",title:m("mainMenu.products")},{title:o.name[P.value]||e}]:[{link:"/",title:m("action.goToHomePage")},{link:"",title:m("mainMenu.products")}]});return(e,o)=>{const d=Y,y=ne,B=ce,X=pe,O=ie;return s(),a("main",me,[t("div",fe,[U(d,{list:n(K)},null,8,["list"]),U(y),!n(i).params.name||n(g)?(s(),a(h,{key:0},[t("h2",null,r(n(b)),1),t("div",ve,[t("div",null,[t("label",_e,r(e.$t("words.sort"))+"：",1),I(t("select",{id:"sortorder","onUpdate:modelValue":o[0]||(o[0]=c=>D(p)?p.value=c:null)},[t("option",ge,r(e.$t("words.newToOld")),1),t("option",ye,r(e.$t("words.oldToNew")),1)],512),[[N,n(p)]])]),t("div",null,[t("label",he,r(e.$t("words.roles"))+"：",1),I(t("select",{id:"roleFilter","onUpdate:modelValue":o[1]||(o[1]=c=>D(f)?f.value=c:null)},[t("option",ke,r(e.$t("words.all")),1),(s(!0),a(h,null,$(n(G),c=>(s(),a("option",{key:c,value:c},r(c),9,we))),128))],512),[[N,n(f)]])]),t("div",null,[t("label",$e,r(e.$t("words.platform"))+"：",1),I(t("select",{id:"platformFilter","onUpdate:modelValue":o[2]||(o[2]=c=>D(v)?v.value=c:null)},[t("option",be,r(e.$t("words.all")),1),o[3]||(o[3]=t("option",{value:"web"},"Web",-1)),o[4]||(o[4]=t("option",{value:"app"},"App",-1))],512),[[N,n(v)]])])]),n(W).length>0?(s(),a("div",{key:0,class:j(["group-list",n(p)==="desc"?"group-list--top-space":"group-list--bottom-space"]),"aria-live":"polite"},[t("div",Re,r(e.$t("words.today")),1),(s(!0),a(h,null,$(n(W),c=>(s(),a("div",{key:c.year,class:"portfolio-area"},[t("ul",Pe,[(s(!0),a(h,null,$(c.products,l=>(s(),a("li",{key:l.id,class:"portfolio-item animation-fade-out"},[l.clickable?(s(),V(B,{key:0,to:{path:n(A)(`/products/${encodeURIComponent(l.slug)}`),query:{dialog:"true",role:n(f)||void 0,platform:n(v)||void 0,sortorder:n(p)||void 0}},title:`${l.name[e.$i18n.locale]}`,class:"portfolio-link"},{default:z(()=>[t("h3",Ce,r(l.name[e.$i18n.locale]),1),t("div",Se,[l.heroImage[e.$i18n.locale]?.[0]?.src?(s(),a("img",{key:0,src:`${l.heroImage[e.$i18n.locale][0].src}`,alt:`${l.name[e.$i18n.locale]}`,class:"portfolio-img"},null,8,qe)):u("",!0),l.intro[e.$i18n.locale]?(s(),a("div",Be,[t("p",null,r(l.intro[e.$i18n.locale]),1)])):u("",!0)]),t("div",Me,[o[6]||(o[6]=t("span",{class:"visually-hidden"},"相關標籤：",-1)),t("span",Te,[o[5]||(o[5]=t("span",{class:"visually-hidden"},"執行起始時間：",-1)),F(" "+r(H(l.yearRange)),1)]),l.platform.includes("web")||l.platform.includes("app")?(s(),a("span",Ue," 平臺種類： ")):u("",!0),l.platform.includes("web")?(s(),a("span",Ve," Web ")):u("",!0),l.platform.includes("app")?(s(),a("span",Ie," App ")):u("",!0),l.roles[e.$i18n.locale].length>0?(s(),a("span",Ne," 擔當角色： ")):u("",!0),(s(!0),a(h,null,$(l.roles[e.$i18n.locale],(M,T)=>(s(),a("span",{key:T,class:"tag"},r(M),1))),128))])]),_:2},1032,["to","title"])):(s(),a("div",De,[t("h3",Fe,r(l.name[e.$i18n.locale]),1),t("div",Ae,[t("img",{src:`${n(S).public.baseUrl}${l.heroImage[e.$i18n.locale][0].src}`,alt:"",class:"portfolio-img"},null,8,Ee),l.intro[e.$i18n.locale]?(s(),a("div",We,[t("p",null,r(l.intro[e.$i18n.locale]),1)])):u("",!0)]),t("div",He,[o[8]||(o[8]=t("span",{class:"visually-hidden"},"相關標籤：",-1)),t("span",Le,[o[7]||(o[7]=t("span",{class:"visually-hidden"},"執行起始時間：",-1)),F(" "+r(H(l.yearRange)),1)]),l.platform.includes("web")||l.platform.includes("app")?(s(),a("span",Oe," 平臺種類： ")):u("",!0),l.platform.includes("web")?(s(),a("span",je," Web ")):u("",!0),l.platform.includes("app")?(s(),a("span",ze," App ")):u("",!0),l.roles[e.$i18n.locale].length>0?(s(),a("span",Qe," 擔當角色： ")):u("",!0),(s(!0),a(h,null,$(l.roles[e.$i18n.locale],(M,T)=>(s(),a("span",{key:T,class:"tag"},r(M),1))),128))])]))]))),128))]),t("div",{class:j(["group-year",n(p)==="desc"?"group-year--bottom":"group-year--top"])},r(c.year),3)]))),128))],2)):(s(),V(X,{key:1},{default:z(()=>[F(r(e.$t("data.nodata")),1)]),_:1}))],64)):u("",!0),n(i).params.name&&n(g)?(s(),a("dialog",{key:1,ref_key:"lightBox",ref:k,onCancel:re(L,["prevent"])},[t("button",{type:"button",class:"btn btn--close-dialog",onClick:L},r(n(m)("action.closeDialog")),1),U(O)],544)):u("",!0),n(i).params.name&&!n(g)?(s(),V(O,{key:2})):u("",!0)])])}}}),tt=de(Ge,[["__scopeId","data-v-c9311d65"]]);export{tt as default};
