import{_ as te}from"./CNt-C7Qx.js";import{_ as J,p as l,K as se,A as o,m as oe,C as z,L as ae,D as le,M as ne,r as $,h as f,w as S,N as re,E as ie,G as ue,x as t,y as U,J as u,O as q,f as n,H as de,F as h,q as r,P as B,Q as D,R as T,v as w,S as j,z as G,T as ce,U as pe,B as V,V as me}from"./uNtbnVmg.js";import{_ as _e}from"./C1GP7115.js";import{p as ve}from"./BwiT7Nvo.js";const fe={},ye={class:"empty-block"};function ge(I,p){return o(),l("div",ye,[se(I.$slots,"default",{},void 0,!0)])}const he=Object.assign(J(fe,[["render",ge],["__scopeId","data-v-786c53aa"]]),{__name:"EmptyBlock"}),ke={class:"page page--grid"},$e={class:"page-container"},we={class:"filters"},be={for:"sortOrder"},Pe={value:"desc"},Re={value:"asc"},Oe={for:"roleFilter"},Se={value:""},Ce=["value"],Me={for:"platformFilter"},Ue={value:""},qe={class:"group-year-present"},Be={class:"product-list"},De={class:"product-title"},Te={class:"product-content"},Ve=["src","alt"],Ie={key:1,class:"product-intro"},Ne={class:"product-footer"},Ee={class:"tag"},Fe={key:0,class:"visually-hidden"},Ae={key:1,class:"tag"},He={key:2,class:"tag"},We={key:3,class:"visually-hidden"},Le={key:1,class:"product-link product-link--disabled"},Qe={class:"product-title"},ze={class:"product-content"},je=["src"],Ge={key:0,class:"product-intro"},Je={class:"product-footer"},Ke={class:"tag"},Ye={key:0,class:"visually-hidden"},Xe={key:1,class:"tag"},Ze={key:2,class:"tag"},xe={key:3,class:"visually-hidden"},et=oe({__name:"products",setup(I){const{t:p}=z(),N=ae(),i=le(),{locale:E}=z(),F=ne(),k=$(null),A=$(ve),c=$(i.query.sortOrder?String(i.query.sortOrder):"desc"),_=$(i.query.role?String(i.query.role):""),v=$(i.query.platform?String(i.query.platform):""),y=f(()=>i.query.dialog==="true"&&i.params.name),K=f(()=>{const e=new Set;return A.value.forEach(s=>{s.roles[E.value].forEach(m=>e.add(m))}),Array.from(e)});S([_,v,c],()=>{N.replace({path:i.path,query:{role:_.value||void 0,platform:v.value||void 0,sortOrder:c.value||void 0}})}),S(()=>i.query,e=>{_.value=e.role?String(e.role):"",v.value=e.platform?String(e.platform):"",c.value=e.sortOrder?String(e.sortOrder):"desc"});const Y=f(()=>A.value.filter(e=>{const s=_.value===""||e.roles[E.value].includes(_.value),m=v.value===""||e.platform.includes(v.value);return s&&m}).sort((e,s)=>c.value==="asc"?e.yearRange.start-s.yearRange.start:s.yearRange.start-e.yearRange.start)),H=f(()=>{const e=[];return Y.value.forEach(s=>{const m=s.yearRange.start;let g=e.find(M=>M.year===m);g||(g={year:m,products:[]},e.push(g)),g.products.push(s)}),e.sort((s,m)=>c.value==="asc"?s.year-m.year:m.year-s.year),e}),W=e=>e.end===null?`${e.start} - `+p("words.present"):`${e.start} - ${e.end}`,L=async()=>{var e;(e=k.value)==null||e.close(),await N.replace({path:F("/products"),query:{role:_.value||void 0,platform:v.value||void 0,sortOrder:c.value||void 0}})};S(()=>i.fullPath,()=>{var e;y.value||(e=k.value)==null||e.close()}),S(y,async e=>{var s;e&&(await me(),(s=k.value)==null||s.showModal())}),re(()=>{var e;y.value&&((e=k.value)==null||e.showModal())});const b=f(()=>p("words.products")),C=f(()=>p("words.careerWorks")),P=ue();ie({title:b,meta:[{hid:"description",name:"description",content:C.value},{hid:"og:url",property:"og:url",content:P.public.baseUrl+i.path},{hid:"og:title",property:"og:title",content:b.value+" - "+p("website.name")},{hid:"og:description",property:"og:description",content:C.value},{hid:"twitter:url",name:"twitter:url",content:P.public.baseUrl+i.path},{hid:"twitter:title",name:"twitter:title",content:b.value+" - "+p("website.name")},{hid:"twitter:description",name:"twitter:description",content:C.value}]});const X=f(()=>i.params.name?[{link:"/",title:p("action.goToHomePage")},{link:"/products",title:p("mainMenu.products")},{title:i.params.name}]:[{link:"/",title:p("action.goToHomePage")},{link:"",title:p("mainMenu.products")}]);return(e,s)=>{const m=te,g=de,M=_e,Z=he,Q=pe;return o(),l("main",ke,[t("div",$e,[U(m,{list:n(X)},null,8,["list"]),U(g),!n(i).params.name||n(y)?(o(),l(h,{key:0},[t("h2",null,r(n(b)),1),t("div",we,[t("div",null,[t("label",be,r(e.$t("words.sort"))+"：",1),B(t("select",{id:"sortOrder","onUpdate:modelValue":s[0]||(s[0]=d=>T(c)?c.value=d:null)},[t("option",Pe,r(e.$t("words.newToOld")),1),t("option",Re,r(e.$t("words.oldToNew")),1)],512),[[D,n(c)]])]),t("div",null,[t("label",Oe,r(e.$t("words.roles"))+"：",1),B(t("select",{id:"roleFilter","onUpdate:modelValue":s[1]||(s[1]=d=>T(_)?_.value=d:null)},[t("option",Se,r(e.$t("words.all")),1),(o(!0),l(h,null,w(n(K),d=>(o(),l("option",{key:d,value:d},r(d),9,Ce))),128))],512),[[D,n(_)]])]),t("div",null,[t("label",Me,r(e.$t("words.platform"))+"：",1),B(t("select",{id:"platformFilter","onUpdate:modelValue":s[2]||(s[2]=d=>T(v)?v.value=d:null)},[t("option",Ue,r(e.$t("words.all")),1),s[3]||(s[3]=t("option",{value:"web"},"Web",-1)),s[4]||(s[4]=t("option",{value:"app"},"App",-1))],512),[[D,n(v)]])])]),n(H).length>0?(o(),l("div",{key:0,class:j(["group-list",n(c)==="desc"?"group-list--top-space":"group-list--bottom-space"]),"aria-live":"polite"},[t("div",qe,r(e.$t("words.today")),1),(o(!0),l(h,null,w(n(H),d=>(o(),l("div",{key:d.year,class:"product-area"},[t("ul",Be,[(o(!0),l(h,null,w(d.products,a=>(o(),l("li",{key:a.id,class:"product-item animation-fade-out"},[a.clickable?(o(),q(M,{key:0,to:{path:n(F)(`/products/${encodeURIComponent(a.slug)}`),query:{dialog:"true",role:n(_)||void 0,platform:n(v)||void 0,sortOrder:n(c)||void 0}},title:`${a.name[e.$i18n.locale]}`,class:"product-link"},{default:G(()=>{var R,O;return[t("h3",De,r(a.name[e.$i18n.locale]),1),t("div",Te,[(O=(R=a.heroImage[e.$i18n.locale])==null?void 0:R[0])!=null&&O.src?(o(),l("img",{key:0,src:`${n(P).public.baseUrl}${a.heroImage[e.$i18n.locale][0].src}`,alt:`${a.name[e.$i18n.locale]}`,class:"product-img"},null,8,Ve)):u("",!0),a.intro[e.$i18n.locale]?(o(),l("div",Ie,[t("p",null,r(a.intro[e.$i18n.locale]),1)])):u("",!0)]),t("div",Ne,[s[6]||(s[6]=t("span",{class:"visually-hidden"},"相關標籤：",-1)),t("span",Ee,[s[5]||(s[5]=t("span",{class:"visually-hidden"},"執行起始時間：",-1)),V(" "+r(W(a.yearRange)),1)]),a.platform.includes("web")||a.platform.includes("app")?(o(),l("span",Fe," 平臺種類： ")):u("",!0),a.platform.includes("web")?(o(),l("span",Ae," Web ")):u("",!0),a.platform.includes("app")?(o(),l("span",He," App ")):u("",!0),a.roles[e.$i18n.locale].length>0?(o(),l("span",We," 擔當角色： ")):u("",!0),(o(!0),l(h,null,w(a.roles[e.$i18n.locale],(x,ee)=>(o(),l("span",{key:ee,class:"tag"},r(x),1))),128))])]}),_:2},1032,["to","title"])):(o(),l("div",Le,[t("h3",Qe,r(a.name[e.$i18n.locale]),1),t("div",ze,[t("img",{src:`${n(P).public.baseUrl}${a.heroImage[e.$i18n.locale][0].src}`,alt:"",class:"product-img"},null,8,je),a.intro[e.$i18n.locale]?(o(),l("div",Ge,[t("p",null,r(a.intro[e.$i18n.locale]),1)])):u("",!0)]),t("div",Je,[s[8]||(s[8]=t("span",{class:"visually-hidden"},"相關標籤：",-1)),t("span",Ke,[s[7]||(s[7]=t("span",{class:"visually-hidden"},"執行起始時間：",-1)),V(" "+r(W(a.yearRange)),1)]),a.platform.includes("web")||a.platform.includes("app")?(o(),l("span",Ye," 平臺種類： ")):u("",!0),a.platform.includes("web")?(o(),l("span",Xe," Web ")):u("",!0),a.platform.includes("app")?(o(),l("span",Ze," App ")):u("",!0),a.roles[e.$i18n.locale].length>0?(o(),l("span",xe," 擔當角色： ")):u("",!0),(o(!0),l(h,null,w(a.roles[e.$i18n.locale],(R,O)=>(o(),l("span",{key:O,class:"tag"},r(R),1))),128))])]))]))),128))]),t("div",{class:j(["group-year",n(c)==="desc"?"group-year--bottom":"group-year--top"])},r(d.year),3)]))),128))],2)):(o(),q(Z,{key:1},{default:G(()=>[V(r(e.$t("data.nodata")),1)]),_:1}))],64)):u("",!0),n(i).params.name&&n(y)?(o(),l("dialog",{key:1,ref_key:"productDialog",ref:k,onCancel:ce(L,["prevent"])},[t("button",{type:"button",class:"btn btn--close-dialog",onClick:L},r(n(p)("action.closeDialog")),1),U(Q)],544)):u("",!0),n(i).params.name&&!n(y)?(o(),q(Q,{key:2})):u("",!0)])])}}}),nt=J(et,[["__scopeId","data-v-f6ee285e"]]);export{nt as default};
