import{_ as x,u as ee}from"./BuD6UL_A.js";import{q as te,G as oe,S as se,H as ae,P as le,r as w,c as _,w as S,M as ne,I as re,J as ie,K as ue,x as l,A as t,B as I,O as u,T as D,j as n,L as de,F as y,y as r,Q as E,U as F,V as N,z as $,W as Y,C as G,X as ce,Y as pe,E as A,D as s,n as me,_ as fe}from"./BfZ0KDir.js";import{_ as ve}from"./CSMDUsE5.js";import{_ as _e}from"./0P0eVjOu.js";import{p as J}from"./CgXvnlwq.js";const ge={class:"page page--grid"},he={class:"page-container"},ye={class:"filters"},ke={for:"sortorder"},we={value:"desc"},$e={value:"asc"},be={for:"roleFilter"},Se={value:""},Re=["value"],Pe={for:"platformFilter"},Ce={value:""},Be={class:"group-year-present"},qe={class:"portfolio-list"},Me={class:"portfolio-title"},Te={class:"portfolio-content"},Ue=["src","alt"],Ve={key:1,class:"portfolio-intro"},Ie={class:"portfolio-footer"},De={class:"tag"},Ee={key:0,class:"visually-hidden"},Fe={key:1,class:"tag"},Ne={key:2,class:"tag"},Ae={key:3,class:"visually-hidden"},We={key:1,class:"portfolio-link portfolio-link--disabled"},He={class:"portfolio-title"},Le={class:"portfolio-content"},Oe=["src"],Qe={key:0,class:"portfolio-intro"},je={class:"portfolio-footer"},ze={class:"tag"},Ye={key:0,class:"visually-hidden"},Ge={key:1,class:"tag"},Je={key:2,class:"tag"},Ke={key:3,class:"visually-hidden"},Xe=te({__name:"products",setup(Ze){const{t:m,locale:R}=oe(),P=se(),i=ae(),W=le(),k=w(null),H=w(J),C=ie(),b=_(()=>m("words.products")),B=_(()=>m("words.careerWorks")),c=w(i.query.sortorder?String(i.query.sortorder):"desc"),f=w(i.query.role?String(i.query.role):""),v=w(i.query.platform?String(i.query.platform):""),g=_(()=>i.query.dialog==="true"&&i.params.name),K=_(()=>{const e=new Set;return H.value.forEach(o=>{o.roles[R.value].forEach(p=>e.add(p))}),Array.from(e)});S([f,v,c],()=>{P.replace({path:i.path,query:{role:f.value||void 0,platform:v.value||void 0,sortorder:c.value||void 0}})}),S(()=>i.query,e=>{f.value=e.role?String(e.role):"",v.value=e.platform?String(e.platform):"",c.value=e.sortorder?String(e.sortorder):"desc"});const X=_(()=>H.value.filter(e=>{const o=f.value===""||e.roles[R.value].includes(f.value),p=v.value===""||e.platform.includes(v.value);return o&&p}).sort((e,o)=>c.value==="asc"?e.yearRange.start-o.yearRange.start:o.yearRange.start-e.yearRange.start)),L=_(()=>{const e=[];return X.value.forEach(o=>{const p=o.yearRange.start;let h=e.find(T=>T.year===p);h||(h={year:p,products:[]},e.push(h)),h.products.push(o)}),e.sort((o,p)=>c.value==="asc"?o.year-p.year:p.year-o.year),e}),O=e=>e.end===null?`${e.start} - `+m("words.present"):`${e.start} - ${e.end}`,Q=async()=>{k.value?.close(),await P.replace({path:W("/products"),query:{role:f.value||void 0,platform:v.value||void 0,sortorder:c.value||void 0}})};S(()=>i.fullPath,()=>{g.value||k.value?.close()}),S(g,async e=>{e&&(await me(),k.value?.showModal())}),ne(()=>{g.value&&k.value?.showModal(),Object.keys(i.query).length>0&&P.replace(i.path)}),re({title:b,meta:[{hid:"description",name:"description",content:B.value},{hid:"og:url",property:"og:url",content:C.public.baseUrl+i.path},{hid:"og:title",property:"og:title",content:b.value+" - "+m("website.name")},{hid:"og:description",property:"og:description",content:B.value},{hid:"twitter:url",name:"twitter:url",content:C.public.baseUrl+i.path},{hid:"twitter:title",name:"twitter:title",content:b.value+" - "+m("website.name")},{hid:"twitter:description",name:"twitter:description",content:B.value}]});const q=i.params.name,j=J.find(e=>e.slug===q),M=_(()=>q&&j?[{link:"/",title:String(m("action.goToHomePage"))},{link:"/products",title:String(m("mainMenu.products"))},{title:String(j.name[R.value]||q)}]:[{link:"/",title:String(m("action.goToHomePage"))},{title:String(m("mainMenu.products"))}]);return ue(()=>{M.value.length>0&&ee(M.value)}),(e,o)=>{const p=x,h=de,T=ve,Z=_e,z=pe;return s(),l("main",ge,[t("div",he,[I(p,{list:n(M)},null,8,["list"]),I(h),!n(i).params.name||n(g)?(s(),l(y,{key:0},[t("h2",null,r(n(b)),1),t("div",ye,[t("div",null,[t("label",ke,r(e.$t("words.sort"))+"：",1),E(t("select",{id:"sortorder","onUpdate:modelValue":o[0]||(o[0]=d=>N(c)?c.value=d:null)},[t("option",we,r(e.$t("words.newToOld")),1),t("option",$e,r(e.$t("words.oldToNew")),1)],512),[[F,n(c)]])]),t("div",null,[t("label",be,r(e.$t("words.roles"))+"：",1),E(t("select",{id:"roleFilter","onUpdate:modelValue":o[1]||(o[1]=d=>N(f)?f.value=d:null)},[t("option",Se,r(e.$t("words.all")),1),(s(!0),l(y,null,$(n(K),d=>(s(),l("option",{key:d,value:d},r(d),9,Re))),128))],512),[[F,n(f)]])]),t("div",null,[t("label",Pe,r(e.$t("words.platform"))+"：",1),E(t("select",{id:"platformFilter","onUpdate:modelValue":o[2]||(o[2]=d=>N(v)?v.value=d:null)},[t("option",Ce,r(e.$t("words.all")),1),o[3]||(o[3]=t("option",{value:"web"},"Web",-1)),o[4]||(o[4]=t("option",{value:"app"},"App",-1))],512),[[F,n(v)]])])]),n(L).length>0?(s(),l("div",{key:0,class:Y(["group-list",n(c)==="desc"?"group-list--top-space":"group-list--bottom-space"]),"aria-live":"polite"},[t("div",Be,r(e.$t("words.today")),1),(s(!0),l(y,null,$(n(L),d=>(s(),l("div",{key:d.year,class:"portfolio-area"},[t("ul",qe,[(s(!0),l(y,null,$(d.products,a=>(s(),l("li",{key:a.id,class:"portfolio-item animation-fade-out"},[a.clickable?(s(),D(T,{key:0,to:{path:n(W)(`/products/${encodeURIComponent(a.slug)}`),query:{dialog:"true",role:n(f)||void 0,platform:n(v)||void 0,sortorder:n(c)||void 0}},title:`${a.name[e.$i18n.locale]}`,class:"portfolio-link"},{default:G(()=>[t("h3",Me,r(a.name[e.$i18n.locale]),1),t("div",Te,[a.heroImage[e.$i18n.locale]?.[0]?.src?(s(),l("img",{key:0,src:`${a.heroImage[e.$i18n.locale][0].src}`,alt:`${a.name[e.$i18n.locale]}`,class:"portfolio-img"},null,8,Ue)):u("",!0),a.intro[e.$i18n.locale]?(s(),l("div",Ve,[t("p",null,r(a.intro[e.$i18n.locale]),1)])):u("",!0)]),t("div",Ie,[o[6]||(o[6]=t("span",{class:"visually-hidden"},"相關標籤：",-1)),t("span",De,[o[5]||(o[5]=t("span",{class:"visually-hidden"},"執行起始時間：",-1)),A(" "+r(O(a.yearRange)),1)]),a.platform.includes("web")||a.platform.includes("app")?(s(),l("span",Ee," 平臺種類： ")):u("",!0),a.platform.includes("web")?(s(),l("span",Fe," Web ")):u("",!0),a.platform.includes("app")?(s(),l("span",Ne," App ")):u("",!0),a.roles[e.$i18n.locale].length>0?(s(),l("span",Ae," 擔當角色： ")):u("",!0),(s(!0),l(y,null,$(a.roles[e.$i18n.locale],(U,V)=>(s(),l("span",{key:V,class:"tag"},r(U),1))),128))])]),_:2},1032,["to","title"])):(s(),l("div",We,[t("h3",He,r(a.name[e.$i18n.locale]),1),t("div",Le,[t("img",{src:`${n(C).public.baseUrl}${a.heroImage[e.$i18n.locale][0].src}`,alt:"",class:"portfolio-img"},null,8,Oe),a.intro[e.$i18n.locale]?(s(),l("div",Qe,[t("p",null,r(a.intro[e.$i18n.locale]),1)])):u("",!0)]),t("div",je,[o[8]||(o[8]=t("span",{class:"visually-hidden"},"相關標籤：",-1)),t("span",ze,[o[7]||(o[7]=t("span",{class:"visually-hidden"},"執行起始時間：",-1)),A(" "+r(O(a.yearRange)),1)]),a.platform.includes("web")||a.platform.includes("app")?(s(),l("span",Ye," 平臺種類： ")):u("",!0),a.platform.includes("web")?(s(),l("span",Ge," Web ")):u("",!0),a.platform.includes("app")?(s(),l("span",Je," App ")):u("",!0),a.roles[e.$i18n.locale].length>0?(s(),l("span",Ke," 擔當角色： ")):u("",!0),(s(!0),l(y,null,$(a.roles[e.$i18n.locale],(U,V)=>(s(),l("span",{key:V,class:"tag"},r(U),1))),128))])]))]))),128))]),t("div",{class:Y(["group-year",n(c)==="desc"?"group-year--bottom":"group-year--top"])},r(d.year),3)]))),128))],2)):(s(),D(Z,{key:1},{default:G(()=>[A(r(e.$t("data.nodata")),1)]),_:1}))],64)):u("",!0),n(i).params.name&&n(g)?(s(),l("dialog",{key:1,ref_key:"lightBox",ref:k,onCancel:ce(Q,["prevent"])},[t("button",{type:"button",class:"btn btn--close-dialog",onClick:Q},r(n(m)("action.closeDialog")),1),I(z)],544)):u("",!0),n(i).params.name&&!n(g)?(s(),D(z,{key:2})):u("",!0)])])}}}),lt=fe(Xe,[["__scopeId","data-v-6cce0eaa"]]);export{lt as default};
