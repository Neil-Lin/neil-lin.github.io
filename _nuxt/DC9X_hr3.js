import{_ as x}from"./CPLdegxm.js";import{_ as J,p as l,K as ee,A as o,m as te,C as z,L as se,D as oe,M as ae,r as w,h as f,w as P,N as le,E as ne,G as re,x as t,y as M,J as u,O as q,f as n,H as ie,F as h,q as r,P as B,Q as D,R as T,v as $,S as j,z as G,T as de,U as ue,B as V,V as ce}from"./DKH7y9-W.js";import{_ as pe}from"./BIrnxNVF.js";import{p as me}from"./BwiT7Nvo.js";const _e={},ve={class:"empty-block"};function fe(N,p){return o(),l("div",ve,[ee(N.$slots,"default",{},void 0,!0)])}const ye=Object.assign(J(_e,[["render",fe],["__scopeId","data-v-786c53aa"]]),{__name:"EmptyBlock"}),ge={class:"page page--grid"},he={class:"page-container"},ke={class:"filters"},we={for:"sortOrder"},$e={value:"desc"},be={value:"asc"},Pe={for:"roleFilter"},Re={value:""},Oe=["value"],Se={for:"platformFilter"},Ce={value:""},Me={class:"group-year-present"},qe={class:"product-list"},Be={class:"product-title"},De={class:"product-content"},Te=["src"],Ve={key:0,class:"product-intro"},Ne={class:"product-footer"},Ue={class:"tag"},Ee={key:0,class:"visually-hidden"},Fe={key:1,class:"tag"},Ie={key:2,class:"tag"},Ae={key:3,class:"visually-hidden"},He={key:1,class:"product-link product-link--disabled"},We={class:"product-title"},Le={class:"product-content"},Qe=["src"],ze={key:0,class:"product-intro"},je={class:"product-footer"},Ge={class:"tag"},Je={key:0,class:"visually-hidden"},Ke={key:1,class:"tag"},Ye={key:2,class:"tag"},Xe={key:3,class:"visually-hidden"},Ze=te({__name:"products",setup(N){const{t:p}=z(),U=se(),i=oe(),{locale:E}=z(),F=ae(),k=w(null),I=w(me),c=w(i.query.sortOrder?String(i.query.sortOrder):"desc"),_=w(i.query.role?String(i.query.role):""),v=w(i.query.platform?String(i.query.platform):""),y=f(()=>i.query.dialog==="true"&&i.params.name),K=f(()=>{const e=new Set;return I.value.forEach(s=>{s.roles[E.value].forEach(m=>e.add(m))}),Array.from(e)});P([_,v,c],()=>{U.replace({path:i.path,query:{role:_.value||void 0,platform:v.value||void 0,sortOrder:c.value||void 0}})}),P(()=>i.query,e=>{_.value=e.role?String(e.role):"",v.value=e.platform?String(e.platform):"",c.value=e.sortOrder?String(e.sortOrder):"desc"});const Y=f(()=>I.value.filter(e=>{const s=_.value===""||e.roles[E.value].includes(_.value),m=v.value===""||e.platform.includes(v.value);return s&&m}).sort((e,s)=>c.value==="asc"?e.yearRange.start-s.yearRange.start:s.yearRange.start-e.yearRange.start)),A=f(()=>{const e=[];return Y.value.forEach(s=>{const m=s.yearRange.start;let g=e.find(O=>O.year===m);g||(g={year:m,products:[]},e.push(g)),g.products.push(s)}),e.sort((s,m)=>c.value==="asc"?s.year-m.year:m.year-s.year),e}),H=e=>e.end===null?`${e.start} - `+p("words.present"):`${e.start} - ${e.end}`,W=async()=>{var e;(e=k.value)==null||e.close(),await U.replace({path:F("/products"),query:{role:_.value||void 0,platform:v.value||void 0,sortOrder:c.value||void 0}})};P(()=>i.fullPath,()=>{var e;y.value||(e=k.value)==null||e.close()}),P(y,async e=>{var s;e&&(await ce(),(s=k.value)==null||s.showModal())}),le(()=>{var e;y.value&&((e=k.value)==null||e.showModal())});const b=f(()=>p("words.products")),R=f(()=>p("words.careerWorks")),L=re();ne({title:b,meta:[{hid:"description",name:"description",content:R.value},{hid:"og:url",property:"og:url",content:L.public.baseUrl+i.path},{hid:"og:title",property:"og:title",content:b.value+" - "+p("website.name")},{hid:"og:description",property:"og:description",content:R.value},{hid:"twitter:url",name:"twitter:url",content:L.public.baseUrl+i.path},{hid:"twitter:title",name:"twitter:title",content:b.value+" - "+p("website.name")},{hid:"twitter:description",name:"twitter:description",content:R.value}]});const X=f(()=>i.params.name?[{link:"/",title:p("action.goToHomePage")},{link:"/products",title:p("mainMenu.products")},{title:i.params.name}]:[{link:"/",title:p("action.goToHomePage")},{link:"",title:p("mainMenu.products")}]);return(e,s)=>{const m=x,g=ie,O=pe,Z=ye,Q=ue;return o(),l("main",ge,[t("div",he,[M(m,{list:n(X)},null,8,["list"]),M(g),!n(i).params.name||n(y)?(o(),l(h,{key:0},[t("h2",null,r(n(b)),1),t("div",ke,[t("div",null,[t("label",we,r(e.$t("words.sort"))+"：",1),B(t("select",{id:"sortOrder","onUpdate:modelValue":s[0]||(s[0]=d=>T(c)?c.value=d:null)},[t("option",$e,r(e.$t("words.newToOld")),1),t("option",be,r(e.$t("words.oldToNew")),1)],512),[[D,n(c)]])]),t("div",null,[t("label",Pe,r(e.$t("words.roles"))+"：",1),B(t("select",{id:"roleFilter","onUpdate:modelValue":s[1]||(s[1]=d=>T(_)?_.value=d:null)},[t("option",Re,r(e.$t("words.all")),1),(o(!0),l(h,null,$(n(K),d=>(o(),l("option",{key:d,value:d},r(d),9,Oe))),128))],512),[[D,n(_)]])]),t("div",null,[t("label",Se,r(e.$t("words.platform"))+"：",1),B(t("select",{id:"platformFilter","onUpdate:modelValue":s[2]||(s[2]=d=>T(v)?v.value=d:null)},[t("option",Ce,r(e.$t("words.all")),1),s[3]||(s[3]=t("option",{value:"web"},"Web",-1)),s[4]||(s[4]=t("option",{value:"app"},"App",-1))],512),[[D,n(v)]])])]),n(A).length>0?(o(),l("div",{key:0,class:j(["group-list",n(c)==="desc"?"group-list--top-space":"group-list--bottom-space"]),"aria-live":"polite"},[t("div",Me,r(e.$t("words.today")),1),(o(!0),l(h,null,$(n(A),d=>(o(),l("div",{key:d.year,class:"product-area"},[t("ul",qe,[(o(!0),l(h,null,$(d.products,a=>(o(),l("li",{key:a.id,class:"product-item animation-fade-out"},[a.clickable?(o(),q(O,{key:0,to:{path:n(F)(`/products/${encodeURIComponent(a.slug)}`),query:{dialog:"true",role:n(_)||void 0,platform:n(v)||void 0,sortOrder:n(c)||void 0}},title:`${a.name[e.$i18n.locale]}`,class:"product-link"},{default:G(()=>[t("h3",Be,r(a.name[e.$i18n.locale]),1),t("div",De,[t("img",{src:a.heroImage[e.$i18n.locale][0].src,alt:"",class:"product-img"},null,8,Te),a.intro[e.$i18n.locale]?(o(),l("div",Ve,[t("p",null,r(a.intro[e.$i18n.locale]),1)])):u("",!0)]),t("div",Ne,[s[6]||(s[6]=t("span",{class:"visually-hidden"},"相關標籤：",-1)),t("span",Ue,[s[5]||(s[5]=t("span",{class:"visually-hidden"},"執行起始時間：",-1)),V(" "+r(H(a.yearRange)),1)]),a.platform.includes("web")||a.platform.includes("app")?(o(),l("span",Ee," 平臺種類： ")):u("",!0),a.platform.includes("web")?(o(),l("span",Fe," Web ")):u("",!0),a.platform.includes("app")?(o(),l("span",Ie," App ")):u("",!0),a.roles[e.$i18n.locale].length>0?(o(),l("span",Ae," 擔當角色： ")):u("",!0),(o(!0),l(h,null,$(a.roles[e.$i18n.locale],(S,C)=>(o(),l("span",{key:C,class:"tag"},r(S),1))),128))])]),_:2},1032,["to","title"])):(o(),l("div",He,[t("h3",We,r(a.name[e.$i18n.locale]),1),t("div",Le,[t("img",{src:a.heroImage[e.$i18n.locale][0].src,alt:"",class:"product-img"},null,8,Qe),a.intro[e.$i18n.locale]?(o(),l("div",ze,[t("p",null,r(a.intro[e.$i18n.locale]),1)])):u("",!0)]),t("div",je,[s[8]||(s[8]=t("span",{class:"visually-hidden"},"相關標籤：",-1)),t("span",Ge,[s[7]||(s[7]=t("span",{class:"visually-hidden"},"執行起始時間：",-1)),V(" "+r(H(a.yearRange)),1)]),a.platform.includes("web")||a.platform.includes("app")?(o(),l("span",Je," 平臺種類： ")):u("",!0),a.platform.includes("web")?(o(),l("span",Ke," Web ")):u("",!0),a.platform.includes("app")?(o(),l("span",Ye," App ")):u("",!0),a.roles[e.$i18n.locale].length>0?(o(),l("span",Xe," 擔當角色： ")):u("",!0),(o(!0),l(h,null,$(a.roles[e.$i18n.locale],(S,C)=>(o(),l("span",{key:C,class:"tag"},r(S),1))),128))])]))]))),128))]),t("div",{class:j(["group-year",n(c)==="desc"?"group-year--bottom":"group-year--top"])},r(d.year),3)]))),128))],2)):(o(),q(Z,{key:1},{default:G(()=>[V(r(e.$t("data.nodata")),1)]),_:1}))],64)):u("",!0),n(i).params.name&&n(y)?(o(),l("dialog",{key:1,ref_key:"productDialog",ref:k,onCancel:de(W,["prevent"])},[t("button",{type:"button",class:"btn btn--close-dialog",onClick:W},r(n(p)("action.closeDialog")),1),M(Q)],544)):u("",!0),n(i).params.name&&!n(y)?(o(),q(Q,{key:2})):u("",!0)])])}}}),at=J(Ze,[["__scopeId","data-v-b30ed889"]]);export{at as default};
