import{_ as x}from"./CtIwkmKK.js";import{m as ee,D as te,L as oe,E as se,M as le,r as w,i as _,w as S,I as ae,G as ne,C as re,p as a,x as o,y as T,K as u,N as I,h as n,H as ie,F as y,q as r,O as N,P as V,Q as D,v as $,R as Q,z,S as ue,T as de,B as F,A as s,U as ce,_ as pe}from"./BxFgzekf.js";import{_ as me}from"./HE8q6FAM.js";import{_ as ve}from"./5CIl2HTh.js";import{p as j}from"./DyUAWITp.js";const fe={class:"page page--grid"},_e={class:"page-container"},ge={class:"filters"},he={for:"sortorder"},ye={value:"desc"},ke={value:"asc"},we={for:"roleFilter"},$e={value:""},be=["value"],Re={for:"platformFilter"},Pe={value:""},Ce={class:"group-year-present"},Se={class:"portfolio-list"},qe={class:"portfolio-title"},Be={class:"portfolio-content"},Me=["src","alt"],Ue={key:1,class:"portfolio-intro"},Te={class:"portfolio-footer"},Ie={class:"tag"},Ne={key:0,class:"visually-hidden"},Ve={key:1,class:"tag"},De={key:2,class:"tag"},Fe={key:3,class:"visually-hidden"},Ae={key:1,class:"portfolio-link portfolio-link--disabled"},Ee={class:"portfolio-title"},He={class:"portfolio-content"},Le=["src"],We={key:0,class:"portfolio-intro"},Oe={class:"portfolio-footer"},Qe={class:"tag"},ze={key:0,class:"visually-hidden"},je={key:1,class:"tag"},Ge={key:2,class:"tag"},Ke={key:3,class:"visually-hidden"},Ye=ee({__name:"products",setup(Je){const{t:m,locale:q}=te(),B=oe(),i=se(),A=le(),k=w(null),E=w(j),b=re(),R=_(()=>m("words.products")),M=_(()=>m("words.careerWorks")),p=w(i.query.sortorder?String(i.query.sortorder):"desc"),v=w(i.query.role?String(i.query.role):""),f=w(i.query.platform?String(i.query.platform):""),g=_(()=>i.query.dialog==="true"&&i.params.name),G=_(()=>{const e=new Set;return E.value.forEach(t=>{t.roles[q.value].forEach(d=>e.add(d))}),Array.from(e)});S([v,f,p],()=>{B.replace({path:i.path,query:{role:v.value||void 0,platform:f.value||void 0,sortorder:p.value||void 0}})}),S(()=>i.query,e=>{v.value=e.role?String(e.role):"",f.value=e.platform?String(e.platform):"",p.value=e.sortorder?String(e.sortorder):"desc"});const K=_(()=>E.value.filter(e=>{const t=v.value===""||e.roles[q.value].includes(v.value),d=f.value===""||e.platform.includes(f.value);return t&&d}).sort((e,t)=>p.value==="asc"?e.yearRange.start-t.yearRange.start:t.yearRange.start-e.yearRange.start)),H=_(()=>{const e=[];return K.value.forEach(t=>{const d=t.yearRange.start;let h=e.find(U=>U.year===d);h||(h={year:d,products:[]},e.push(h)),h.products.push(t)}),e.sort((t,d)=>p.value==="asc"?t.year-d.year:d.year-t.year),e}),L=e=>e.end===null?`${e.start} - `+m("words.present"):`${e.start} - ${e.end}`,W=async()=>{var e;(e=k.value)==null||e.close(),await B.replace({path:A("/products"),query:{role:v.value||void 0,platform:f.value||void 0,sortorder:p.value||void 0}})};S(()=>i.fullPath,()=>{var e;g.value||(e=k.value)==null||e.close()}),S(g,async e=>{var t;e&&(await ce(),(t=k.value)==null||t.showModal())}),ae(()=>{var e;g.value&&((e=k.value)==null||e.showModal()),Object.keys(i.query).length>0&&B.replace(i.path)}),ne({title:R,meta:[{hid:"description",name:"description",content:M.value},{hid:"og:url",property:"og:url",content:b.public.baseUrl+i.path},{hid:"og:title",property:"og:title",content:R.value+" - "+m("website.name")},{hid:"og:description",property:"og:description",content:M.value},{hid:"twitter:url",name:"twitter:url",content:b.public.baseUrl+i.path},{hid:"twitter:title",name:"twitter:title",content:R.value+" - "+m("website.name")},{hid:"twitter:description",name:"twitter:description",content:M.value}]});const Y=_(()=>{const e=i.params.name,t=j.find(d=>d.slug===e);return e&&t?[{link:"/",title:m("action.goToHomePage")},{link:"/products",title:m("mainMenu.products")},{title:t.name[q.value]||e}]:[{link:"/",title:m("action.goToHomePage")},{link:"",title:m("mainMenu.products")}]});return(e,t)=>{const d=x,h=ie,U=me,J=ve,O=de;return s(),a("main",fe,[o("div",_e,[T(d,{list:n(Y)},null,8,["list"]),T(h),!n(i).params.name||n(g)?(s(),a(y,{key:0},[o("h2",null,r(n(R)),1),o("div",ge,[o("div",null,[o("label",he,r(e.$t("words.sort"))+"：",1),N(o("select",{id:"sortorder","onUpdate:modelValue":t[0]||(t[0]=c=>D(p)?p.value=c:null)},[o("option",ye,r(e.$t("words.newToOld")),1),o("option",ke,r(e.$t("words.oldToNew")),1)],512),[[V,n(p)]])]),o("div",null,[o("label",we,r(e.$t("words.roles"))+"：",1),N(o("select",{id:"roleFilter","onUpdate:modelValue":t[1]||(t[1]=c=>D(v)?v.value=c:null)},[o("option",$e,r(e.$t("words.all")),1),(s(!0),a(y,null,$(n(G),c=>(s(),a("option",{key:c,value:c},r(c),9,be))),128))],512),[[V,n(v)]])]),o("div",null,[o("label",Re,r(e.$t("words.platform"))+"：",1),N(o("select",{id:"platformFilter","onUpdate:modelValue":t[2]||(t[2]=c=>D(f)?f.value=c:null)},[o("option",Pe,r(e.$t("words.all")),1),t[3]||(t[3]=o("option",{value:"web"},"Web",-1)),t[4]||(t[4]=o("option",{value:"app"},"App",-1))],512),[[V,n(f)]])])]),n(H).length>0?(s(),a("div",{key:0,class:Q(["group-list",n(p)==="desc"?"group-list--top-space":"group-list--bottom-space"]),"aria-live":"polite"},[o("div",Ce,r(e.$t("words.today")),1),(s(!0),a(y,null,$(n(H),c=>(s(),a("div",{key:c.year,class:"portfolio-area"},[o("ul",Se,[(s(!0),a(y,null,$(c.products,l=>(s(),a("li",{key:l.id,class:"portfolio-item animation-fade-out"},[l.clickable?(s(),I(U,{key:0,to:{path:n(A)(`/products/${encodeURIComponent(l.slug)}`),query:{dialog:"true",role:n(v)||void 0,platform:n(f)||void 0,sortorder:n(p)||void 0}},title:`${l.name[e.$i18n.locale]}`,class:"portfolio-link"},{default:z(()=>{var P,C;return[o("h3",qe,r(l.name[e.$i18n.locale]),1),o("div",Be,[(C=(P=l.heroImage[e.$i18n.locale])==null?void 0:P[0])!=null&&C.src?(s(),a("img",{key:0,src:`${n(b).public.baseUrl}${l.heroImage[e.$i18n.locale][0].src}`,alt:`${l.name[e.$i18n.locale]}`,class:"portfolio-img"},null,8,Me)):u("",!0),l.intro[e.$i18n.locale]?(s(),a("div",Ue,[o("p",null,r(l.intro[e.$i18n.locale]),1)])):u("",!0)]),o("div",Te,[t[6]||(t[6]=o("span",{class:"visually-hidden"},"相關標籤：",-1)),o("span",Ie,[t[5]||(t[5]=o("span",{class:"visually-hidden"},"執行起始時間：",-1)),F(" "+r(L(l.yearRange)),1)]),l.platform.includes("web")||l.platform.includes("app")?(s(),a("span",Ne," 平臺種類： ")):u("",!0),l.platform.includes("web")?(s(),a("span",Ve," Web ")):u("",!0),l.platform.includes("app")?(s(),a("span",De," App ")):u("",!0),l.roles[e.$i18n.locale].length>0?(s(),a("span",Fe," 擔當角色： ")):u("",!0),(s(!0),a(y,null,$(l.roles[e.$i18n.locale],(X,Z)=>(s(),a("span",{key:Z,class:"tag"},r(X),1))),128))])]}),_:2},1032,["to","title"])):(s(),a("div",Ae,[o("h3",Ee,r(l.name[e.$i18n.locale]),1),o("div",He,[o("img",{src:`${n(b).public.baseUrl}${l.heroImage[e.$i18n.locale][0].src}`,alt:"",class:"portfolio-img"},null,8,Le),l.intro[e.$i18n.locale]?(s(),a("div",We,[o("p",null,r(l.intro[e.$i18n.locale]),1)])):u("",!0)]),o("div",Oe,[t[8]||(t[8]=o("span",{class:"visually-hidden"},"相關標籤：",-1)),o("span",Qe,[t[7]||(t[7]=o("span",{class:"visually-hidden"},"執行起始時間：",-1)),F(" "+r(L(l.yearRange)),1)]),l.platform.includes("web")||l.platform.includes("app")?(s(),a("span",ze," 平臺種類： ")):u("",!0),l.platform.includes("web")?(s(),a("span",je," Web ")):u("",!0),l.platform.includes("app")?(s(),a("span",Ge," App ")):u("",!0),l.roles[e.$i18n.locale].length>0?(s(),a("span",Ke," 擔當角色： ")):u("",!0),(s(!0),a(y,null,$(l.roles[e.$i18n.locale],(P,C)=>(s(),a("span",{key:C,class:"tag"},r(P),1))),128))])]))]))),128))]),o("div",{class:Q(["group-year",n(p)==="desc"?"group-year--bottom":"group-year--top"])},r(c.year),3)]))),128))],2)):(s(),I(J,{key:1},{default:z(()=>[F(r(e.$t("data.nodata")),1)]),_:1}))],64)):u("",!0),n(i).params.name&&n(g)?(s(),a("dialog",{key:1,ref_key:"lightBox",ref:k,onCancel:ue(W,["prevent"])},[o("button",{type:"button",class:"btn btn--close-dialog",onClick:W},r(n(m)("action.closeDialog")),1),T(O)],544)):u("",!0),n(i).params.name&&!n(g)?(s(),I(O,{key:2})):u("",!0)])])}}}),st=pe(Ye,[["__scopeId","data-v-8e88cb0d"]]);export{st as default};
