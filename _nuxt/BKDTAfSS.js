import{_ as x}from"./ZszftkOL.js";import{m as ee,C as Q,K as te,D as oe,L as se,r as w,h as _,w as C,M as le,E as ae,G as ne,p as a,x as t,y as M,J as u,N as U,f as n,H as re,F as g,q as r,O as q,P as T,Q as N,v as $,R as z,z as G,S as ie,T as ue,B as V,A as s,U as de,_ as ce}from"./D799vLbR.js";import{_ as pe}from"./BAhOwLu6.js";import{_ as me}from"./C8WoQvXn.js";import{p as fe}from"./1OiEtZJD.js";const ve={class:"page page--grid"},_e={class:"page-container"},he={class:"filters"},ye={for:"sortOrder"},ge={value:"desc"},ke={value:"asc"},we={for:"roleFilter"},$e={value:""},be=["value"],Re={for:"platformFilter"},Oe={value:""},Pe={class:"group-year-present"},Ce={class:"portfolio-list"},Se={class:"portfolio-title"},Be={class:"portfolio-content"},Me=["src","alt"],Ue={key:1,class:"portfolio-intro"},qe={class:"portfolio-footer"},Te={class:"tag"},Ne={key:0,class:"visually-hidden"},Ve={key:1,class:"tag"},De={key:2,class:"tag"},Fe={key:3,class:"visually-hidden"},Ie={key:1,class:"portfolio-link portfolio-link--disabled"},Ae={class:"portfolio-title"},Ee={class:"portfolio-content"},He=["src"],Le={key:0,class:"portfolio-intro"},We={class:"portfolio-footer"},Qe={class:"tag"},ze={key:0,class:"visually-hidden"},Ge={key:1,class:"tag"},Je={key:2,class:"tag"},Ke={key:3,class:"visually-hidden"},Ye=ee({__name:"products",setup(je){const{t:m}=Q(),D=te(),i=oe(),{locale:F}=Q(),I=se(),k=w(null),A=w(fe),c=w(i.query.sortOrder?String(i.query.sortOrder):"desc"),f=w(i.query.role?String(i.query.role):""),v=w(i.query.platform?String(i.query.platform):""),h=_(()=>i.query.dialog==="true"&&i.params.name),J=_(()=>{const e=new Set;return A.value.forEach(o=>{o.roles[F.value].forEach(p=>e.add(p))}),Array.from(e)});C([f,v,c],()=>{D.replace({path:i.path,query:{role:f.value||void 0,platform:v.value||void 0,sortOrder:c.value||void 0}})}),C(()=>i.query,e=>{f.value=e.role?String(e.role):"",v.value=e.platform?String(e.platform):"",c.value=e.sortOrder?String(e.sortOrder):"desc"});const K=_(()=>A.value.filter(e=>{const o=f.value===""||e.roles[F.value].includes(f.value),p=v.value===""||e.platform.includes(v.value);return o&&p}).sort((e,o)=>c.value==="asc"?e.yearRange.start-o.yearRange.start:o.yearRange.start-e.yearRange.start)),E=_(()=>{const e=[];return K.value.forEach(o=>{const p=o.yearRange.start;let y=e.find(B=>B.year===p);y||(y={year:p,products:[]},e.push(y)),y.products.push(o)}),e.sort((o,p)=>c.value==="asc"?o.year-p.year:p.year-o.year),e}),H=e=>e.end===null?`${e.start} - `+m("words.present"):`${e.start} - ${e.end}`,L=async()=>{var e;(e=k.value)==null||e.close(),await D.replace({path:I("/products"),query:{role:f.value||void 0,platform:v.value||void 0,sortOrder:c.value||void 0}})};C(()=>i.fullPath,()=>{var e;h.value||(e=k.value)==null||e.close()}),C(h,async e=>{var o;e&&(await de(),(o=k.value)==null||o.showModal())}),le(()=>{var e;h.value&&((e=k.value)==null||e.showModal())});const b=_(()=>m("words.products")),S=_(()=>m("words.careerWorks")),R=ne();ae({title:b,meta:[{hid:"description",name:"description",content:S.value},{hid:"og:url",property:"og:url",content:R.public.baseUrl+i.path},{hid:"og:title",property:"og:title",content:b.value+" - "+m("website.name")},{hid:"og:description",property:"og:description",content:S.value},{hid:"twitter:url",name:"twitter:url",content:R.public.baseUrl+i.path},{hid:"twitter:title",name:"twitter:title",content:b.value+" - "+m("website.name")},{hid:"twitter:description",name:"twitter:description",content:S.value}]});const Y=_(()=>i.params.name?[{link:"/",title:m("action.goToHomePage")},{link:"/products",title:m("mainMenu.products")},{title:i.params.name}]:[{link:"/",title:m("action.goToHomePage")},{link:"",title:m("mainMenu.products")}]);return(e,o)=>{const p=x,y=re,B=pe,j=me,W=ue;return s(),a("main",ve,[t("div",_e,[M(p,{list:n(Y)},null,8,["list"]),M(y),!n(i).params.name||n(h)?(s(),a(g,{key:0},[t("h2",null,r(n(b)),1),t("div",he,[t("div",null,[t("label",ye,r(e.$t("words.sort"))+"：",1),q(t("select",{id:"sortOrder","onUpdate:modelValue":o[0]||(o[0]=d=>N(c)?c.value=d:null)},[t("option",ge,r(e.$t("words.newToOld")),1),t("option",ke,r(e.$t("words.oldToNew")),1)],512),[[T,n(c)]])]),t("div",null,[t("label",we,r(e.$t("words.roles"))+"：",1),q(t("select",{id:"roleFilter","onUpdate:modelValue":o[1]||(o[1]=d=>N(f)?f.value=d:null)},[t("option",$e,r(e.$t("words.all")),1),(s(!0),a(g,null,$(n(J),d=>(s(),a("option",{key:d,value:d},r(d),9,be))),128))],512),[[T,n(f)]])]),t("div",null,[t("label",Re,r(e.$t("words.platform"))+"：",1),q(t("select",{id:"platformFilter","onUpdate:modelValue":o[2]||(o[2]=d=>N(v)?v.value=d:null)},[t("option",Oe,r(e.$t("words.all")),1),o[3]||(o[3]=t("option",{value:"web"},"Web",-1)),o[4]||(o[4]=t("option",{value:"app"},"App",-1))],512),[[T,n(v)]])])]),n(E).length>0?(s(),a("div",{key:0,class:z(["group-list",n(c)==="desc"?"group-list--top-space":"group-list--bottom-space"]),"aria-live":"polite"},[t("div",Pe,r(e.$t("words.today")),1),(s(!0),a(g,null,$(n(E),d=>(s(),a("div",{key:d.year,class:"portfolio-area"},[t("ul",Ce,[(s(!0),a(g,null,$(d.products,l=>(s(),a("li",{key:l.id,class:"portfolio-item animation-fade-out"},[l.clickable?(s(),U(B,{key:0,to:{path:n(I)(`/products/${encodeURIComponent(l.slug)}`),query:{dialog:"true",role:n(f)||void 0,platform:n(v)||void 0,sortOrder:n(c)||void 0}},title:`${l.name[e.$i18n.locale]}`,class:"portfolio-link"},{default:G(()=>{var O,P;return[t("h3",Se,r(l.name[e.$i18n.locale]),1),t("div",Be,[(P=(O=l.heroImage[e.$i18n.locale])==null?void 0:O[0])!=null&&P.src?(s(),a("img",{key:0,src:`${n(R).public.baseUrl}${l.heroImage[e.$i18n.locale][0].src}`,alt:`${l.name[e.$i18n.locale]}`,class:"portfolio-img"},null,8,Me)):u("",!0),l.intro[e.$i18n.locale]?(s(),a("div",Ue,[t("p",null,r(l.intro[e.$i18n.locale]),1)])):u("",!0)]),t("div",qe,[o[6]||(o[6]=t("span",{class:"visually-hidden"},"相關標籤：",-1)),t("span",Te,[o[5]||(o[5]=t("span",{class:"visually-hidden"},"執行起始時間：",-1)),V(" "+r(H(l.yearRange)),1)]),l.platform.includes("web")||l.platform.includes("app")?(s(),a("span",Ne," 平臺種類： ")):u("",!0),l.platform.includes("web")?(s(),a("span",Ve," Web ")):u("",!0),l.platform.includes("app")?(s(),a("span",De," App ")):u("",!0),l.roles[e.$i18n.locale].length>0?(s(),a("span",Fe," 擔當角色： ")):u("",!0),(s(!0),a(g,null,$(l.roles[e.$i18n.locale],(X,Z)=>(s(),a("span",{key:Z,class:"tag"},r(X),1))),128))])]}),_:2},1032,["to","title"])):(s(),a("div",Ie,[t("h3",Ae,r(l.name[e.$i18n.locale]),1),t("div",Ee,[t("img",{src:`${n(R).public.baseUrl}${l.heroImage[e.$i18n.locale][0].src}`,alt:"",class:"portfolio-img"},null,8,He),l.intro[e.$i18n.locale]?(s(),a("div",Le,[t("p",null,r(l.intro[e.$i18n.locale]),1)])):u("",!0)]),t("div",We,[o[8]||(o[8]=t("span",{class:"visually-hidden"},"相關標籤：",-1)),t("span",Qe,[o[7]||(o[7]=t("span",{class:"visually-hidden"},"執行起始時間：",-1)),V(" "+r(H(l.yearRange)),1)]),l.platform.includes("web")||l.platform.includes("app")?(s(),a("span",ze," 平臺種類： ")):u("",!0),l.platform.includes("web")?(s(),a("span",Ge," Web ")):u("",!0),l.platform.includes("app")?(s(),a("span",Je," App ")):u("",!0),l.roles[e.$i18n.locale].length>0?(s(),a("span",Ke," 擔當角色： ")):u("",!0),(s(!0),a(g,null,$(l.roles[e.$i18n.locale],(O,P)=>(s(),a("span",{key:P,class:"tag"},r(O),1))),128))])]))]))),128))]),t("div",{class:z(["group-year",n(c)==="desc"?"group-year--bottom":"group-year--top"])},r(d.year),3)]))),128))],2)):(s(),U(j,{key:1},{default:G(()=>[V(r(e.$t("data.nodata")),1)]),_:1}))],64)):u("",!0),n(i).params.name&&n(h)?(s(),a("dialog",{key:1,ref_key:"lightBox",ref:k,onCancel:ie(L,["prevent"])},[t("button",{type:"button",class:"btn btn--close-dialog",onClick:L},r(n(m)("action.closeDialog")),1),M(W)],544)):u("",!0),n(i).params.name&&!n(h)?(s(),U(W,{key:2})):u("",!0)])])}}}),st=ce(Ye,[["__scopeId","data-v-f34347e3"]]);export{st as default};
